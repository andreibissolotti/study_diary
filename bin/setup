#!/usr/bin/env ruby

puts '== Instalando dependÃªncias =='
system 'gem install bundler --conservative'
system('bundle check') || system('bundle install')

require 'sqlite3'

puts "\n== Preparando banco de dados =="
begin
  db = SQLite3::Database.open "db/database.db"
  db.execute <<~SQL
    CREATE TABLE IF NOT EXISTS study_itens(
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      category INTEGER,
      title varchar(255),
      descr varchar(255),
      done BOOLEAN
    );
  SQL
  db.close
end

puts "\n== Tudo configurado, execute 'bin/run' para executar o programa =="